{"file":"index-B18RNfRG.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAe,aAAA,KAAA,iBAAA,wBAAA;ACAf,MAAe,aAAA;ACGR,MAAM,WAAW,YAAY,SAAS,MAAM;AAC/C,QAAM,cAAc,IAAI,CAAC;AACzB,QAAM,iBAAiB,CAAC,SAAS;AAC7B,gBAAY,QAAQ;AAAA,EACvB;AACD,QAAM,iBAAiB,MAAM;AACzB,WAAO,YAAY;AAAA,EACtB;AAED,SAAO,EAAE,aAAa,gBAAgB,eAAgB;AAC1D,GAAG;AAAA,EACC,SAAS;AAAA,IACL,SAAS,eAAe;AAAA,EAC3B;AACL,CAAC;;;;;ACgBK,UAAA,EAAE,MAAM;AACG,aAAS,MAAM,iBAAiB,SAAS;AAG1D,UAAM,YAAY;AAElB,UAAM,SAAS;AAEf,UAAM,cAAc;AAEd,UAAA,UAAU,IAAI,KAAK;AAGnB,UAAA,SAAS,IAAI,KAAK;AAExB,UAAM,SAAS;AAGf,UAAM,cAAc,MAAM;;AACzB,cAAQ,QAAQ;AACZ,UAAA,CAAC,YAAY,OAAO;AACX,oBAAA,QAAQ,cAAc,iBAAiB;AAAA,UAClD,SAAS;AAAA,UACT,OAAO;AAAA,UACP,QAAQ;AAAA,QAAA,CACR;AAAA,MACF;AACA,wBAAY,UAAZ,mBAAmB,YAAY,KAAK,CAAO,QAAA;AAC1C,gBAAQ,aAAa,QAAQ;AAAA,MAAA;AAE9B,gBAAU,MAAM;AAEhB,wBAAY,UAAZ,mBAAmB,OAAO,SAAS,EAAE;AAAA,IAAW;AAkBjD,UAAM,kBAAkB,YAAY;AAEnC,YAAM,cAAc,MAAM,OAAO,MAAM,eAAe;AAC7C,eAAA,EAAE,eAAe,WAAW;AAAA,IAAA;AAGtC,UAAM,UAAU,MAAM;;AACrB,mBAAO,UAAP,mBAAc;AACE;IAAA;AAKjB,UAAM,SAAS,MAAM;AAEhB,UAAA,CAAC,QAAQ,OAAO;AACnB,eAAO,MAAM;AACb,eAAO,MAAM;MAAU,OACjB;AACN,eAAO,MAAM;AACL;MACT;AAAA,IAAA;AAMD,QAAI,WAAW;AAEf,QAAI,eAAe;AACb,UAAA,eAAe,IAAI,IAAI;AACPA,aAAU,YAAY;AAE3C,YAAM,aAAa,OAAO,SAAS,OAAO,MAAM;AAChD,UAAI,OAAM,yCAAY,OAAa,SAAA,eAAe,yCAAY,UAAS;AACvE,UAAI,UAAS,yCAAY,WAAU,yCAAY,UAAS;AACpD,UAAA,UAAU,OAAQ,aAAa,cAAe;AACjD,eAAO,SAAS,OAAO,MAAM,iBAAiB,KAAK,CAAO,QAAA;AACzD,iBAAO,QAAQ;AACf,uBAAa,QAAQ;AACrB,cAAI,QAAQ,GAAG;AACP;UAER;AAAA,QAAA,CACA;AAAA,MAAA,OACK;AACN,eAAO,QAAQ;AACf,eAAO,SAAS,OAAO,MAAM,iBAAiB,KAAK,CAAO,QAAA;AACzD,cAAI,QAAQ,GAAG;AAEN;AACR;AAAA,UACD;AAAA,QAAA,CACA;AAAA,MACF;AAAA,OAEE,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["_debounce"],"sources":["../../../../src/assets/images/page/videoMask.jpg","../../../../src/assets/images/page/play.png","../../../../src/store/video.js","../../../../src/pages/index/components/trading/index.vue"],"sourcesContent":["export default \"__VITE_ASSET__C7VscZl9__\"","export default \"data:image/png;base64,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\"","import { defineStore } from \"pinia\";\r\nimport { ref } from \"vue\";\r\n\r\nexport const useVideo = defineStore(\"video\", () => {\r\n    const currentTime = ref(0)\r\n    const setCurrentTime = (data) => {\r\n        currentTime.value = data\r\n    }\r\n    const getCurrentTime = () => {\r\n        return currentTime.value\r\n    }\r\n\r\n    return { currentTime, setCurrentTime, getCurrentTime }\r\n}, {\r\n    persist: {\r\n        storage: persistedState.localStorage\r\n    }\r\n})","<template>\r\n\t<div class=\"trading\">\r\n\t\t<publicMWrap :title=\"t('Home.trading.title2')\">\r\n                        <p class=\"subTitle\">{{ t('Home.trading.subTitle') }}</p>\r\n\t\t\t<div class=\"picBox\" ref=\"picBox\" :class=\"{ pausing: (!isShow || isClick) }\">\r\n\t\t\t\t<div class=\"iframeBox\">\r\n\t\t\t\t\t<div id=\"youtubePlayerAuto\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<template v-if=\"!isShow || isClick\">\r\n\t\t\t\t\t<img class=\"img\" src=\"@/assets/images/page/videoMask.jpg\" alt=\"\" @click=\"clickMasker\">\r\n\t\t\t\t\t<img class=\"play\" src=\"@/assets/images/page/play.png\" alt=\"\" @click=\"clickMasker\">\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</publicMWrap>\r\n\t\t<!-- 主動點擊播放彈窗 -->\r\n\t\t<publicMaskPopup ref=\"iframeRef\" isCenter isClickMaskHide>\r\n\t\t\t<template #slot_mask>\r\n\t\t\t\t<div class=\"iframeBox mobBox\">\r\n\t\t\t\t\t<div class=\"err\" v-if=\"isNetworkErr\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-guanbi\" @click=\"iframeRef.maskHide\"></i>\r\n\t\t\t\t\t\t<p class=\"text\">{{ t(\"Education.errTips\") }}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"youtubePlayer\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t</publicMaskPopup>\r\n\t</div>\r\n</template>\r\n<script setup>\r\nimport { onMounted, ref, watchEffect } from \"vue\"\r\nimport youTubePlayer from \"youtube-player\";\r\nimport { useVideo } from \"@/store/video\"\r\nimport { useCheckMobile } from '@/store/isMobile'\r\nconst { t } = useI18n();\r\nconst isMobile = computed(() => useCheckMobile().getItem())\r\n\r\n// 彈窗實例\r\nconst iframeRef = ref()\r\n// PC自動播放容器\r\nconst player = ref()\r\n// 點擊播放\r\nconst clickPlayer = ref()\r\n// 記錄用戶是否主動點擊\r\nconst isClick = ref(false)\r\n\r\n// 是否展示海報封面\r\nconst isShow = ref(false);\r\n// 視頻內容容器\r\nconst picBox = ref()\r\n\r\n// 封面點擊彈窗播放\r\nconst clickMasker = () => {\r\n\tisClick.value = true\r\n\tif (!clickPlayer.value) {\r\n\t\tclickPlayer.value = youTubePlayer('youtubePlayer', {\r\n\t\t\tvideoId: 'GfBcitFGqlk',\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '100%'\r\n\t\t})\r\n\t}\r\n\tclickPlayer.value?.getIframe().then(res => {\r\n\t\tres && (isNetworkErr.value = false)\r\n\t})\r\n\tiframeRef.value.maskShow()\r\n\t// clickPlayer.value?.playVideo()\r\n\tclickPlayer.value?.seekTo(useVideo().currentTime)\r\n}\r\n\r\n// PC端自動播放創建視頻\r\nconst initPlayer = () => {\r\n\tif (!isClick.value && !player.value) {\r\n\t\tplayer.value = youTubePlayer('youtubePlayerAuto', {\r\n\t\t\tvideoId: 'GfBcitFGqlk',\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '100%',\r\n\t\t\tautoPlay: true,\r\n\t\t})\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\twindow.addEventListener('scroll', isClientInner, true)\r\n\t\t}, 300);\r\n\t}\r\n}\r\n// 存下自動播放的時間\r\nconst keepCurrentTime = async () => {\r\n\t// 存下自動播放的時間\r\n\tconst currentTime = await player.value.getCurrentTime()\r\n\tuseVideo().setCurrentTime(currentTime)\r\n}\r\n// 視頻暫停\r\nconst pauseIt = () => {\r\n\tplayer.value?.pauseVideo()\r\n\tkeepCurrentTime()\r\n\t// console.log(\"keepCurrentTime\");\r\n}\r\n\r\n// 視頻播放\r\nconst playIt = () => {\r\n\t// 靜音時才能自動播放,當用戶主動點擊時不能自動播放\r\n\tif (!isClick.value) {\r\n\t\tplayer.value.mute()\r\n\t\tplayer.value.playVideo()\r\n\t} else {\r\n\t\tplayer.value.unMute()\r\n\t\tpauseIt()\r\n\t}\r\n}\r\n\r\nlet timer = null\r\n\r\nlet playNum = 0\r\nlet pauseNum = 0\r\nlet autoPlayNum = 0\r\nlet autoPauseNum = 0\r\nconst isNetworkErr = ref(true)\r\nconst isClientInner = _debounce(async () => {\r\n\t// 視頻內容展示超三分之二才自動播放\r\n\tconst clientRect = picBox.value && picBox.value.getBoundingClientRect();\r\n\tlet top = clientRect?.top < window.innerHeight - (clientRect?.height * 0.70)\r\n\tlet bottom = clientRect?.bottom > (clientRect?.height * 0.7)\r\n\tif (bottom && top && (pauseNum === autoPauseNum)) {\r\n\t\tplayer.value && player.value.getPlayerState().then(res => {\r\n\t\t\tisShow.value = true\r\n\t\t\tisNetworkErr.value = false\r\n\t\t\tif (res !== 1) {\r\n\t\t\t\tplayIt()\r\n\t\t\t\tautoPlayNum++\r\n\t\t\t}\r\n\t\t})\r\n\t} else {\r\n\t\tisShow.value = false\r\n\t\tplayer.value && player.value.getPlayerState().then(res => {\r\n\t\t\tif (res === 1) {\r\n\t\t\t\t///1是播放，2，不是播放状态，3\r\n\t\t\t\tpauseIt()\r\n\t\t\t\tautoPauseNum++\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n}, 300)\r\n\r\nonMounted(() => {\r\n\t// 僅PC端做自動播放\r\n\tif (window.innerWidth > 1024) {\r\n\t\twatchEffect(() => {\r\n\t\t\tif (isClick.value) {\r\n\t\t\t\tisShow.value = !isClick.value\r\n\t\t\t}\r\n\t\t\tinitPlayer()\r\n\t\t})\r\n\t\tplayer.value.on(\"stateChange\", (e) => {\r\n\t\t\tif (e.data === 1) {\r\n\t\t\t\tplayNum++\r\n\t\t\t}\r\n\t\t\tif (e.data === 2) {\r\n\t\t\t\tpauseNum++\r\n\t\t\t\t// 存下當前暫停的時間\r\n\t\t\t\tkeepCurrentTime()\r\n\t\t\t}\r\n\t\t})\r\n\t} else {\r\n\t\twindow.removeEventListener('scroll', isClientInner, true)\r\n\t}\r\n})\r\n\r\nonUnmounted(() => {\r\n\tclearTimeout(timer)\r\n\twindow.removeEventListener('scroll', isClientInner, true)\r\n}) \r\n</script>\r\n<style scoped lang='scss' src=\"./index.scss\"></style>\r\n"],"version":3}