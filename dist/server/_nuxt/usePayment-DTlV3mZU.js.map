{"version":3,"file":"usePayment-DTlV3mZU.js","sources":["../../../../src/assets/images/common/waitingPayment.png","../../../../src/assets/images/common/kefu.png","../../../../src/components/public/waitingPayment/index.vue","../../../../src/hooks/usePayment.js"],"sourcesContent":["export default \"__VITE_ASSET__RcfXAbDy__\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJQSURBVHgB7VfhcdMwFP7kwl3vaK/ZoGICzAZmg4xgJqihAyRMgJkgYYLCBAkTNExgMwH5AT+JeIql5kVIiYyd9nrNd/edZUvv6XtPfrIMHPHIINASSqkBXYbEV8SMKIkD070kLog18StxLoRY4hDQQogj4k8VDz12QpSx80RliBxe0WWMTSY0auKc+MO0NSSazKWmzTGmbH1AF5iszJyodcRZhG1KnDq2szbZch1KYtXVmfHDg6pa+zGZ4WLG6AjtwxE1aGM86VNMQNQk1ihnRiU6QF2f36j35xNVnErmv2T+M9dGeARVaCqkpqp4if8VU7xIkSS35rbG6uS1KJdLs1S3oTkSR0yOTbl2KlFR/qYNUlkfEuLPzfp5s1G+tc9pzmHQCauGCj1BvTsradnUmsVZ5plrxscnbIBOpTX4hJ4gPv4qYDdOIUas65u5Zrzi+JKlrD1Hn1itmgAFTX59emmeTtmIDLsE0Tov0CueT++a6uSNmaNG8zHWkPAIsg9r9AxdXZvJhWRd/wh6xjoHhxK0hlKfKS0X2M5+bcRcwCPooDAv9174BKWBbf078YtZ+2iYCsrRHEtcyF2G7lHBh4qYIl6MDi7mQHeXAF+G7DHURWYi0jtu7CdFj7Xv5gKbl9gixfahbyuaqW/nZP1DFtEl9sBkxyIPjJm5GUoQDx5dTIbc424U2gi6FxwF7cOTEsSLIPpA79uHZKBMr1g75jRQoxGlxYyU/y8jLJQMChWHMSLRwmceclDuMKr0BGgJ1fz6VAGf+rPS6c/miAfHX4dot06BuEo5AAAAAElFTkSuQmCC\"","<template>\r\n    <publicMaskPopup ref=\"waitingPaymentRef\" isCenter :isClickMaskHide=\"false\">\r\n        <template #slot_mask>\r\n            <div class=\"waitingPaymentMain\">\r\n                <img class=\"close\" alt=\"\" src=\"@/assets/images/icons/close.png\" @click=\"waitingPaymentRef.maskHide\" />\r\n                <img class=\"icon\" alt=\"\" src=\"@/assets/images/common/waitingPayment.png\" />\r\n                <p class=\"text\">{{ t(\"Pay.confirm\") }}</p>\r\n                <p class=\"subText\">{{ t(\"Pay.txt\") }}</p>\r\n                <div class=\"btnGroup\" :lang=\"locale\">\r\n                    <button class=\"btn deep\" @click=\"finish\">\r\n                        {{ t(\"Pay.payFinish\") }}\r\n                    </button>\r\n                    <button class=\"btn light\" @click=\"bindBtn('/user/order')\">\r\n                        {{ t(\"Pay.repay\") }}\r\n                    </button>\r\n                </div>\r\n                <p class=\"contact\" @click=\"bindBtn('/contact')\">\r\n                    <img class=\"img\" alt=\"\" src=\"@/assets/images/common/kefu.png\" />\r\n                    {{ t(\"Pay.service\") }}\r\n                </p>\r\n            </div>\r\n        </template>\r\n    </publicMaskPopup>\r\n</template>\r\n<script setup>\r\nimport { extractSubstringAfterMatch, nuxtTo } from \"@/utils/tools\";\r\nimport { LANGUAGE_LIST } from \"@/config/language\";\r\nconst waitingPaymentRef = ref();\r\n\r\nconst pageData = ref({\r\n    current: 1,\r\n    size: 10,\r\n    total: 0,\r\n    orderBy: 'mft'\r\n})\r\nconst { t, locale } = useI18n();\r\nconst shower = () => {\r\n    waitingPaymentRef.value.maskShow();\r\n};\r\ndefineExpose({ shower });\r\nconst linkTo = url => {\r\n    nuxtTo(url);\r\n};\r\nconst bindBtn = url => {\r\n    const languageValues = Object.values(LANGUAGE_LIST).map(item => item.value);\r\n    const pathAfterLanguage = extractSubstringAfterMatch(useRoute().path, languageValues);\r\n    if (url === pathAfterLanguage) {\r\n        waitingPaymentRef.value.maskHide();\r\n    } else {\r\n        linkTo(url);\r\n    }\r\n};\r\nconst finish = async () => {\r\n    bindBtn('/user')\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.waitingPaymentMain {\r\n    width: 550px;\r\n    height: auto;\r\n    background-color: #000000;\r\n    border-radius: 24px;\r\n    padding: 20px 50px 60px;\r\n    box-sizing: border-box;\r\n    @include dfac;\r\n    flex-direction: column;\r\n\r\n    .close {\r\n        width: 20px;\r\n        height: 20px;\r\n        position: absolute;\r\n        top: 20px;\r\n        right: 20px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .icon {\r\n        width: 120px;\r\n        height: auto;\r\n    }\r\n\r\n    .text {\r\n        @include setfont(24px, #ffffff, 700);\r\n        line-height: 36px;\r\n        margin-top: 40px;\r\n    }\r\n\r\n    .subText {\r\n        @include setfont(16px, #ffffff, 700);\r\n        line-height: 24px;\r\n        margin-top: 20px;\r\n    }\r\n\r\n    .btnGroup {\r\n        margin-top: 40px;\r\n        @include dfjc;\r\n\r\n        .btn {\r\n            width: 202px;\r\n            height: 42px;\r\n            border-radius: 5em;\r\n            margin: 0 12px;\r\n            @include setfont(14px, #ffffff, 700);\r\n            @include dfjcac;\r\n            cursor: pointer;\r\n            box-sizing: border-box;\r\n            white-space: pre-line;\r\n            text-align: center;\r\n\r\n            &.deep {\r\n                background: linear-gradient(90deg, #ff8922 0%, #ff6257 100%);\r\n            }\r\n\r\n            &.light {\r\n                background: transparent;\r\n                border: 1px solid #ff7506;\r\n                color: #ff7604;\r\n            }\r\n        }\r\n    }\r\n\r\n    .contact {\r\n        margin-top: 40px;\r\n        cursor: pointer;\r\n        @include dfjcac;\r\n        @include setfont(16px, #ff7507, 500);\r\n\r\n        .img {\r\n            width: 18px;\r\n            height: auto;\r\n            margin-right: 4px;\r\n        }\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 1024px) {\r\n    .waitingPaymentMain {\r\n        width: 87.4667vw;\r\n        border-radius: 6.4vw;\r\n        padding: 5.3333vw 0 16vw;\r\n\r\n        .close {\r\n            width: 5.3333vw;\r\n            height: 5.3333vw;\r\n            top: 5.3333vw;\r\n            right: 5.3333vw;\r\n        }\r\n\r\n        .icon {\r\n            width: 24vw;\r\n        }\r\n\r\n        .text {\r\n            font-size: 6.4vw;\r\n            line-height: 9.6vw;\r\n            margin-top: 5.3333vw;\r\n        }\r\n\r\n        .subText {\r\n            font-size: 4.2667vw;\r\n            line-height: 6.4vw;\r\n            margin-top: 5.3333vw;\r\n            width: 57.0667vw;\r\n            text-align: center;\r\n        }\r\n\r\n        .btnGroup {\r\n            display: block;\r\n            width: 100%;\r\n            margin-top: 10.6667vw;\r\n            padding: 0 5.3333vw;\r\n\r\n            .btn {\r\n                width: 90%;\r\n                min-height: 11.2vw;\r\n                margin: 0 auto 3.2vw;\r\n                padding: 1.6vw 5.3333vw;\r\n                font-size: 3.7333vw;\r\n                white-space: normal;\r\n                line-height: 1;\r\n\r\n                &:last-child {\r\n                    margin-bottom: 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        .contact {\r\n            margin-top: 10.6667vw;\r\n            font-size: 4.2667vw;\r\n            white-space: pre-line;\r\n\r\n            .img {\r\n                width: 4.8vw;\r\n                margin-right: 2.6667vw;\r\n            }\r\n        }\r\n\r\n        [lang=\"vn-vie\"],\r\n        [lang=\"id-idn\"],\r\n        [lang=\"de-de\"] {\r\n            .btn {\r\n                &.light {\r\n                    font-size: 3.2vw;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { ref } from 'vue'\r\nimport { ElLoading } from 'element-plus'\r\nimport { bindPayment, bindChallengeSignUp, bindReRegistration, bindChallengeCancel, } from '@/api/challenge'\r\n\r\nexport const usePayment = () => {\r\n        //发起支付\r\n        const bindDoPayment = _debounce(\r\n                (params, fnc, isLoading = true) => {\r\n                        let loading = null\r\n                        if (isLoading) {\r\n                                loading = ElLoading.service({\r\n                                        lock: false,\r\n                                        background: 'rgba(0, 0, 0, 0.5)',\r\n                                })\r\n                        }\r\n                        bindPayment(params)\r\n                                .then((res) => {\r\n                                        loading?.close()\r\n                                        window.open(res.data.redirectPageUrl, '_blank')\r\n                                        fnc()\r\n                                })\r\n                                .catch((err) => {\r\n                                        loading?.close()\r\n                                })\r\n                },\r\n                1000,\r\n                { leading: true, trailing: false },\r\n        )\r\n        //发起订单及支付\r\n        const bindDoChallengeSignUp = _debounce(\r\n                (params1, params2, fnc) => {\r\n                        const loading = ElLoading.service({\r\n                                lock: false,\r\n                                background: 'rgba(0, 0, 0, 0.5)',\r\n                        })\r\n                        bindChallengeSignUp(params1)\r\n                                .then((res) => {\r\n                                        params2.challengeUid = res.data.registrationId\r\n                                        params2.paymentUid = res.data.paymentId\r\n                                        bindDoPayment(\r\n                                                params2,\r\n                                                () => {\r\n                                                        loading.close()\r\n                                                        fnc()\r\n                                                },\r\n                                                false,\r\n                                        )\r\n                                })\r\n                                .catch((err) => {\r\n                                        loading.close()\r\n                                })\r\n                },\r\n                1000,\r\n                { leading: true, trailing: false },\r\n        )\r\n        //发起续费及支付\r\n        const bindDoRePayment = _debounce(\r\n                (params1, params2, fnc) => {\r\n                        const loading = ElLoading.service({\r\n                                lock: false,\r\n                                background: 'rgba(0, 0, 0, 0.5)',\r\n                        })\r\n                        bindReRegistration(params1)\r\n                                .then((res) => {\r\n                                        params2.challengeUid = res.data.registrationId\r\n                                        params2.paymentUid = res.data.paymentId\r\n                                        bindDoPayment(\r\n                                                params2,\r\n                                                () => {\r\n                                                        loading.close()\r\n                                                        fnc()\r\n                                                },\r\n                                                false,\r\n                                        )\r\n                                })\r\n                                .catch((err) => {\r\n                                        loading.close()\r\n                                })\r\n                },\r\n                1000,\r\n                { leading: true, trailing: false },\r\n        )\r\n        //取消订单\r\n        const bindDoCancelOrder = _debounce(\r\n                (params, fnc) => {\r\n                        const loading = ElLoading.service({\r\n                                lock: false,\r\n                                background: 'rgba(0, 0, 0, 0.5)',\r\n                        })\r\n                        bindChallengeCancel(params).then((res) => {\r\n                                loading.close()\r\n                                fnc()\r\n                        })\r\n                },\r\n                1000,\r\n                { leading: true, trailing: false },\r\n        )\r\n\r\n\r\n        //活动码兑换\r\n        const activityCodeLoading = ref(false)\r\n        const bindCheckActivityCode = ()=>{\r\n                activityCodeLoading.value = true\r\n                return new Promise((resolve,reject)=>{\r\n                        setTimeout(()=>{\r\n                                activityCodeLoading.value = false\r\n                                if(true){\r\n                                        resolve({ msg: \"success\" })\r\n                                }else {\r\n                                        reject({ msg: \"error\" })\r\n                                }\r\n                        },1000)\r\n                })\r\n        }\r\n\r\n        return { bindDoPayment, bindDoChallengeSignUp, bindDoRePayment, bindDoCancelOrder, activityCodeLoading, bindCheckActivityCode }\r\n}\r\n"],"names":["_debounce"],"mappings":"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"}