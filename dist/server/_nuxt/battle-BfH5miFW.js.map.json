{"file":"battle-BfH5miFW.js","mappings":"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","names":["_debounce"],"sources":["../../../../src/assets/images/icons/gift.png","../../../../src/components/user/battle/activity.vue","../../../../src/components/user/battle/toolTips.vue","../../../../src/assets/images/flag/icons/Default.png","../../../../src/hooks/useCurrency.js","../../../../src/components/user/battle/index.vue","../../../../src/pages/user/battle.vue"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAbCAYAAABiFp9rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMFSURBVHgBxVa9bhNBEJ65YOy4cYoogoqjoaCBBonS8AThCUgbGuAJkkhUNIQiNVBSIESNFNwhikjpaCKCKAApAtnYOV/ub5jZ3Tvv3l/oGMvevdn5duabmV0fQIvQ3vCmfFvXnw19+AfB2g0E3MUXvDw0ql18sP/YXfc+8NQ3u2zj5v4OtIhXq+15W5YTkUe0d3e7eLKdKM+wzesb0CIXygqOdoWBFVAwibberK1dGVxeXonD1O/0llwDj+7z70tokCqjHqzUGX58/Y1J4sbkZ7h+9Ol31YDqcY2OcHP0lUHjsr7TXTDoDzrVnRAPoUWQiB5yOOtwylEGJwCzXwAnRz5Mv/swnwCE/PVvQ9C/DsE4VqDV7ADg/RNhodtJxig4hCweWzuP8GlUNIjUaBeyTADEH92FywMGJ6zzWJcirF6Dvn8L+jnq4AsHNWZrNicSNoK7kbtQrkk100596hAXpvas7hDozdGM2qEKl6gO4SnvuVob50JwvpDZmIxDKhyXRFL3nGmugwlIw21blBSWwuvYzBxTq27v4H+ICoeO3/qFpnuR4CzCYhS5xMs9+8r7TPDjGIp1GytyFk3w6j3niOibAUO+12Co5nGo3Uc8eqiB6cDd8LTHdlOuB7l6waj9cMS/d6qO5lPDzc43SqG1Ik2c/SBJNEZDyGqnRtGOwlm5kKpx1ZrMk8hFpfwcTtH0JTqBYaujqbbPo7NHzciFC8P5bPGs7MWJZ44IneOoyJ068jk7hDQuMYo1ZpE266RTG6PZwtbcKWau9eUaybPCMAtC9x5QkCZG8xkUaXJTp4FpVMeouQmwlZFVfM+MudOkVKMkluDcG9EuTbOjqaFs3cb5vSegSuoMI8DqJYr1RVowar5Cq82QJTbGckLy94DNjAJVWDt5aKWB2FFN6qaWddFI+X8RNDOSTtEgnbY8OkFV2ts6R2hyrJnoTdBrcvSnpJaIMjB9ipUaZXHe3rlxGdzgKJnvQAqvQN4/UjFNmc0SqtGTseuilhiWBK5OcAU+q7zc/AUGSWyB0eC+bAAAAABJRU5ErkJggg==\"","<template>\r\n        <div class=\"activity\" @click=\"activityPopupRef.maskShow\">\r\n                <img class=\"gift\" alt=\"\" src=\"@/assets/images/icons/gift.png\" />\r\n                <div class=\"textBox\"><span>{{ t('User.txt9') }}</span></div>\r\n        </div>\r\n        <publicMaskPopup ref=\"activityPopupRef\" isCenter :isClickMaskHide=\"false\">\r\n                <template #slot_mask>\r\n                        <div class=\"activityPopup\">\r\n                                <img class=\"close\" alt=\"\" src=\"@/assets/images/icons/close.png\"\r\n                                        @click=\"activityPopupRef.maskHide\" />\r\n                                <p class=\"popupName\">{{ t('User.txt9') }}</p>\r\n                                <div class=\"paymentCode\" v-loading=\"activityCodeLoading\"\r\n                                        element-loading-background=\"rgba(0, 0, 0, 0.5)\">\r\n                                        <p class=\"tit\">{{ t(\"Login.placeholder6\") }}</p>\r\n                                        <div class=\"inputBox\" :class=\"{ err: checkResult === 'error' }\">\r\n                                                <input class=\"in\" v-model=\"activityCode\" @input=\"bindDoCheck\" />\r\n                                        </div>\r\n                                </div>\r\n                                <template v-if=\"checkResult === 'success'\">\r\n                                        <div class=\"descLine\">\r\n                                                <p class=\"label\">{{ t('Battle.size') }}</p>\r\n                                                <p class=\"value\">大师($200,000)</p>\r\n                                        </div>\r\n                                        <div class=\"descLine\">\r\n                                                <p class=\"label\">{{ t('User.txt12') }}</p>\r\n                                                <p class=\"value\">$1699</p>\r\n                                        </div>\r\n                                        <div class=\"descLine\">\r\n                                                <p class=\"label\">{{ t('User.txt13') }}</p>\r\n                                                <p class=\"value\">$999</p>\r\n                                        </div>\r\n                                </template>\r\n                                <template v-if=\"checkResult === 'error'\">\r\n                                        <p class=\"errLine\">输入的活动码有误</p>\r\n                                </template>\r\n                                <button class=\"btn\" :class=\"{ active: checkResult === 'success' }\"\r\n                                        @click=\"bindSubmit\">{{ t('User.txt10') }}</button>\r\n                                <div class=\"bottomText\">\r\n                                        <p class=\"text\">没有活动码？立即联系客服<span @click=\"linkTo('/contact')\">获取</span></p>\r\n                                </div>\r\n                        </div>\r\n                </template>\r\n        </publicMaskPopup>\r\n</template>\r\n<script setup>\r\nimport { usePayment } from '@/hooks/usePayment'\r\nimport { nuxtTo } from \"@/utils/tools\";\r\nconst { activityCodeLoading, bindCheckActivityCode } = usePayment()\r\nconst activityPopupRef = ref()\r\nconst checkResult = ref(\"\")\r\nconst activityCode = ref(\"\")\r\nconst emits = defineEmits(['used'])\r\nconst { t } = useI18n()\r\nconst bindDoCheck = _debounce(() => {\r\n        if (activityCode.value.length === 6) {\r\n                bindCheckActivityCode().then(res => {\r\n                        checkResult.value = res.msg\r\n                        console.log(\"xxxxxxxxx\", res)\r\n                }).catch(err => {\r\n                        console.log(\"ccccccccc\", err)\r\n                        checkResult.value = err.msg\r\n                })\r\n        } else {\r\n                checkResult.value = \"error\"\r\n        }\r\n}, 300, { leading: false, trailing: true })\r\nconst bindSubmit = () => {\r\n        if (checkResult.value !== \"success\") return false\r\n        activityPopupRef.value.maskHide()\r\n        emits('used', {\r\n                type: 2,\r\n                price: 799,\r\n                couponId: \"111111111111\"\r\n        })\r\n}\r\nconst linkTo = url => {\r\n        nuxtTo(url);\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.activity {\r\n        @include dfafe;\r\n        cursor: pointer;\r\n        user-select: none;\r\n\r\n        .gift {\r\n                width: 26px;\r\n                height: 27px;\r\n        }\r\n\r\n        .textBox {\r\n                width: auto;\r\n                height: 24px;\r\n                @include df;\r\n\r\n                &::before {\r\n                        content: \"\";\r\n                        background: url(\"@/assets/images/icons/aBorder1.png\") no-repeat;\r\n                        background-size: cover;\r\n                        width: 16px;\r\n                        height: 24px;\r\n                }\r\n\r\n                &::after {\r\n                        content: \"\";\r\n                        background: url(\"@/assets/images/icons/aBorder2.png\") no-repeat;\r\n                        background-size: cover;\r\n                        width: 16px;\r\n                        height: 24px;\r\n                }\r\n\r\n                span {\r\n                        @include setfont(12px, #fff, 700);\r\n                        height: 24px;\r\n                        line-height: 24px;\r\n                        padding: 0 8px;\r\n                        background-image: linear-gradient(to right, #ffc89c, #ff7f1a);\r\n                }\r\n        }\r\n}\r\n\r\n.activityPopup {\r\n        width: 500px;\r\n        height: auto;\r\n        background-color: #000000;\r\n        border-radius: 24px;\r\n        padding: 20px 40px 30px;\r\n        box-sizing: border-box;\r\n\r\n        .close {\r\n                width: 22px;\r\n                height: 22px;\r\n                position: absolute;\r\n                top: 20px;\r\n                right: 20px;\r\n                cursor: pointer;\r\n                opacity: .8;\r\n                transition: all .3s\r\n        }\r\n\r\n        .close:hover {\r\n                opacity: 1\r\n        }\r\n\r\n        .popupName {\r\n                @include setfont(24px, #fff, 700);\r\n                line-height: 36px;\r\n                text-align: center;\r\n        }\r\n\r\n        .paymentCode {\r\n                margin-top: 20px;\r\n\r\n                .tit {\r\n                        @include setfont(14px, #979797, 400);\r\n                        line-height: 21px;\r\n                }\r\n\r\n                .inputBox {\r\n                        margin-top: 4px;\r\n                        width: 100%;\r\n                        height: 45px;\r\n                        box-sizing: border-box;\r\n                        border-radius: 10px;\r\n                        padding: 10px 16px;\r\n                        border: 1px solid #1c1c1c;\r\n                        background-color: #1c1c1c;\r\n                        @include df;\r\n                        transition: all .3s;\r\n\r\n                        &.err {\r\n                                border-color: #EB2121;\r\n                        }\r\n\r\n                        .in {\r\n                                flex: 1;\r\n                                height: 100%;\r\n                                @include setfont(16px, #fff, 500);\r\n                        }\r\n                }\r\n        }\r\n\r\n        .errLine {\r\n                margin-top: 5px;\r\n                line-height: 21px;\r\n                font-size: 14px;\r\n                color: #EB2121;\r\n        }\r\n\r\n        .descLine {\r\n                margin-top: 10px;\r\n                @include dfjsbac;\r\n                line-height: 21px;\r\n                font-size: 14px;\r\n\r\n                .label {\r\n                        color: #979797;\r\n                }\r\n\r\n                .value {\r\n                        color: #FFFFFF;\r\n                }\r\n        }\r\n\r\n        .btn {\r\n                @include setbutton(200px, 42px, 5em, #595959);\r\n                cursor: no-drop;\r\n                @include setfont(16px, #fff, 500);\r\n                transition: all .3s;\r\n                margin: 20px auto 0;\r\n\r\n                &.active {\r\n                        background: linear-gradient(90deg, #FF7700 0%, #FF5847 100%);\r\n                        cursor: pointer;\r\n                }\r\n        }\r\n\r\n        .bottomText {\r\n                margin-top: 20px;\r\n                @include dfjc;\r\n\r\n                .text {\r\n                        @include setfont(14px, #979797, 500);\r\n                        line-height: 21px;\r\n\r\n                        span {\r\n                                color: #ff7700;\r\n                                cursor: pointer;\r\n                        }\r\n\r\n                        span:hover {\r\n                                text-decoration: underline;\r\n                        }\r\n                }\r\n        }\r\n}\r\n\r\n@media screen and (max-width: 1024px) {\r\n        .activity {\r\n                .gift {\r\n                        width: 20px;\r\n                        height: auto;\r\n                }\r\n\r\n                .textBox {\r\n                        height: 20px;\r\n\r\n                        &::before {\r\n                                width: 13px;\r\n                                height: 20px;\r\n                        }\r\n\r\n                        &::after {\r\n                                width: 13px;\r\n                                height: 20px;\r\n                        }\r\n\r\n                        span {\r\n                                font-size: 12px;\r\n                                height: 20px;\r\n                                line-height: 20px;\r\n                                padding: 0 8px;\r\n                        }\r\n                }\r\n        }\r\n\r\n        .activityPopup {\r\n                width: 87.4667vw;\r\n                border-radius: 6.4vw;\r\n                padding: 5.3333vw 4.2667vw 10.6667vw;\r\n\r\n                .close {\r\n                        width: 4.2667vw;\r\n                        height: 4.2667vw;\r\n                        position: absolute;\r\n                        right: 5.3333vw;\r\n                        top: 5.3333vw;\r\n                }\r\n\r\n                .popupName {\r\n                        font-size: 4.8vw;\r\n                        line-height: 7.2vw\r\n                }\r\n\r\n                .paymentCode {\r\n                        margin-top: 5.3333vw;\r\n\r\n                        .tit {\r\n                                font-size: 3.2vw;\r\n                                line-height: 4.8vw;\r\n                        }\r\n\r\n                        .inputBox {\r\n                                margin-top: 1.0667vw;\r\n                                height: 12vw;\r\n                                border-radius: 2.6667vw;\r\n                                padding: 2.6667vw 4.2667vw;\r\n\r\n                                .in {\r\n                                        font-size: 3.7333vw;\r\n                                }\r\n                        }\r\n                }\r\n\r\n                .errLine {\r\n                        margin-top: 1.3333vw;\r\n                        font-size: 3.2vw;\r\n                        line-height: 4.8vw;\r\n                }\r\n\r\n                .descLine {\r\n                        margin-top: 2.6667vw;\r\n                        font-size: 3.2vw;\r\n                        line-height: 4.8vw;\r\n                }\r\n\r\n                .btn {\r\n                        margin: 5.3333vw auto 0;\r\n                        font-size: 4.2667vw;\r\n                        width: 42.6667vw;\r\n                        height: 11.2vw;\r\n                }\r\n\r\n                .bottomText {\r\n                        margin-top: 5.3333vw;\r\n\r\n                        .text {\r\n                                line-height: 5.6vw;\r\n                                font-size: 3.7333vw;\r\n                        }\r\n                }\r\n        }\r\n}\r\n</style>","<template>\r\n        <client-only>\r\n                <el-tooltip class=\"box-item\" :trigger=\"isMobile?'click':'hover'\" effect=\"dark\" :content=\"contentStr\" placement=\"right\" append-to=\".battle\" popper-class=\"aTips\">\r\n                        <span class=\"key\">\r\n                                <img class=\"icon\" alt=\"\" src=\"@/assets/images/challenges/doubt.svg\" />\r\n                                {{ valueStr }}\r\n                        </span>\r\n                </el-tooltip>\r\n        </client-only>\r\n</template>\r\n<script setup>\r\nimport { useCheckMobile } from \"@/store/isMobile\"\r\nconst isMobile = computed(()=> useCheckMobile().getItem())\r\nconst props = defineProps({\r\n        contentStr:{\r\n                type: String,\r\n                default: \"\"\r\n        },\r\n        valueStr:{\r\n                type: String,\r\n                default: \"\"\r\n        },\r\n})\r\nconst {contentStr,valueStr} = toRefs(props)\r\nconst { t } = useI18n();\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.key {\r\n        color: #979797;display: inline-block;cursor: pointer;max-width: 60%;\r\n        line-height: 21px;\r\n        font-size: 14px;\r\n}\r\n.icon{width: 12px;height: 12px;margin-right: 4px;transform: translateY(1px);}\r\n\r\n@media screen and (max-width: 1024px) {\r\n        .key {\r\n                line-height: 4.8vw;\r\n                font-size: 3.2vw;\r\n        }\r\n        .icon{width: 3.2vw;height: 3.2vw;margin-right: 1.0667vw;transform: translateY(1px);}\r\n}\r\n</style>","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPwSURBVHgB1Zk/TBNRHMe/V5rYThY3WDxxdLANIyS0CaOJMDgqsLiCg8G4WBZD4iB1dEHiyEATHU04ElYCDDpKWXC0TsDi+fu+d1fa3p/eu1LAT3Lcn/Zx3/7e7/t7795ZSIlbRQFnKMLFYzm1ZSvKVvA20pStofYWdmTvWKtwkBILhrivUPbEzbeJSgrF1zGEmvUWByYNEwv1BL6RwzIuB0fuviBRbiT5ck+hqotPlcAlDIY15LFiVVW0I4kVKlG0JYrb0Dk4SBqipBIX3UzUB+5LZZR9DF4k1D0kIO5rZchQQiOqRGZUJE3N0i9NMVolzGgBoVfY3VGwnJW606BDqGecq+ruOBpisFK7wTpzVLvbxvVje1patCLqdfkR0jK5CIx4Xvh9rPcnkmo/6kiNrgQOD7Otiy7WkQaK+yWCcsPA+HznZ7w++hDY2xDxDRijBxgH8CLquXwfpgzbwPKRFvHTCQo9kxTLeYWjVtLCTfGiqnM0g0X0AwV3iyS+yN1aOpHExQx3vplmMCj2PgFf+xp951iNMmqykbaws8urkpsfSuGfMx2YXauu3p6sX0Q5OWo6STOV0Q/MQ7qbOchjpoGfm9P0ggj8WNHfpdDn2/r8rJn8HtL9WfkzhX559F7Kk9e9jHK+0Bk5P0cpkEJHi160E2Nb7rJyexFpYPSebukbx0HxFJmmRGkaNJONNFCkH51uUd2C/O9yn44ChaYzEvOt+8bMu80F4MuLYNf6YnOpblfIIA2smWPlzmuMIg112tSCv60E21HsZLpSRdfTfmY/c3wueM3vco5UcV3MOcHumpnrRSMjatRCMVYOXmOuUiBNw7E9Cnb9/TIMUWYyG9tGitECGE1Ge3P+onaa/I8oLB3RY6NG+R5ZMl3VpqGZTiJiMHwXhuxkRW1din7ySUmca1nY87eluB/q86gfdfoHhjhZGUcPcMvAUHFFm1H0Z0lxdfPIgQFNNc2z1pTIjcTNKCRK7LMt7eqJxXDDEbb9Xkdi2OPwp3neSWI+z0aLnViKrpUsSWxrQgY17i6emZbVI3IZSWG3PpiRyMmcpiDHd+xg/vo/hr1wcmhePy21AljRh75QvQi2jZuEhXv+831rCPWe9mq4OdTaFyE6x/pzVIFky4ADhgsQ1fYLHUJVBbBUTpgPq5eHXtnrWoYMzJ5UuP9em9im3Hs2bPkxdJpnvZNBQItt4OqgyIq6d5imuJb/xUIuUQ3PwWfhQVaDmlq567GWb/KywZbdukS4jMvAUuVwJekrncRCfdQ61ZC8eNCvcEwfgPS8QoZs03dOxkLb8VZZuE2JcIq20f5CTCa8cp3mOFbziRwOer39iOIfCBNS+tB7q1EAAAAASUVORK5CYII=\"","import { ref } from 'vue'\r\nimport { flag } from \"@/data/currencyFlag\"\r\nimport {getCurrencyList,getCurrencyConverter} from \"@/api/challenge\"\r\nimport {deepClone} from \"@/utils/tools\"\r\nimport { ElLoading } from 'element-plus'\r\nimport iconDefault from \"@/assets/images/flag/icons/Default.png\"\r\nexport const useCurrency = () => {\r\n        const currencyData = ref({})\r\n        const currencyType = ref(1)\r\n        const searchCurrency = ref('')\r\n        const bindGetCurrency = (amount) => {\r\n                getCurrencyList({assetType:currencyType.value}).then((res)=>{\r\n                        let list = deepClone(res.data)\r\n                        list.forEach(itemList => {\r\n                                const match = flag.find(itemFlag => itemFlag.name === itemList.currency)\r\n                                if(match){\r\n                                        itemList.data = match\r\n                                }else {\r\n                                        itemList.data = {}\r\n                                        itemList.data.flag = iconDefault\r\n                                }\r\n                        })\r\n                        currencyData.value.originList = list\r\n                        currencyData.value.list = list\r\n                        currencyData.value.current = list.find(item => item.selected)?.currency ? list.find(item => item.selected)?.currency : list[0].currency\r\n                        currencyData.value.currentFlag = list.find(item => item.selected)?.currency ? list.find(item => item.selected)?.data.flag : list[0].data.flag\r\n                        bindGetConverter(amount)\r\n                })\r\n        }\r\n        const bindGetConverter = (amount) => {\r\n                // const loading = ElLoading.service({\r\n                //         lock: false,\r\n                //         background: 'rgba(0, 0, 0, 0)',\r\n                // })\r\n                let params = {\r\n                        amount: amount,\r\n                        assetType: currencyType.value,\r\n                        baseCurrency: \"USD\",\r\n                        targetCurrency: currencyData.value.current\r\n                }\r\n                getCurrencyConverter(params).then((res)=>{\r\n                        currencyData.value.converter = res.data\r\n                        // loading.close()\r\n                })\r\n        }\r\n        const bindChangeCurrencyType = (type,amount) => {\r\n                currencyType.value = type\r\n                bindGetCurrency(amount)\r\n        }\r\n        const bindChangeCurrency = (currency,amount) => {\r\n                currencyData.value.list.forEach(item => {\r\n                        item.selected = item.currency === currency\r\n                })\r\n                currencyData.value.current = currency\r\n                currencyData.value.currentFlag = currencyData.value.list.find(item => item.selected)?.data.flag\r\n                bindGetConverter(amount)\r\n        }\r\n        watch(\r\n                () => searchCurrency.value,\r\n                (newVal, oldVal) => {\r\n                        const lowerInput = newVal.toLowerCase();\r\n                        const regex = new RegExp(lowerInput, 'i'); // 'i' 表示不区分大小写\r\n                        currencyData.value.list = currencyData.value.originList.filter(item => {\r\n                                return regex.test(item.currency)\r\n                        });\r\n                }\r\n        )\r\n\r\n        return { searchCurrency, currencyData, currencyType, bindGetCurrency, bindGetConverter, bindChangeCurrencyType, bindChangeCurrency }\r\n}","<template>\r\n        <div class=\"battle\">\r\n                <battleBackLine>\r\n                        <battleActivity @used=\"bindGetUsedActivityCode\"></battleActivity>\r\n                </battleBackLine>\r\n                <p class=\"mobTitle mob_show\">{{ t(\"User.list.btn3\") }}</p>\r\n                <div class=\"battle_inner\">\r\n                        <div class=\"battle_inner-order\">\r\n                                <h5 class=\"title\">\r\n                                        <span class=\"title_l\">{{ t(\"Battle.setBattle\") }} - CFD</span>\r\n                                        <a href=\"#desc\" class=\"mob_show goNext\">{{ t(\"Battle.orderDesc\") }}</a>\r\n                                </h5>\r\n                                <div class=\"acount-size\">{{ t(\"Battle.size\") }}</div>\r\n                                <div class=\"acount-list\">\r\n                                        <div class=\"acount-item \" v-for=\"(item, idx) in challengesData?.list\" :key=\"idx\"\r\n                                                :class=\"{ actived: currentType === idx }\" :data-badge=\"t(item?.name)\"\r\n                                                @click=\"changeChallengeType(idx)\">\r\n                                                {{ item.amount }}\r\n                                        </div>\r\n                                </div>\r\n                                <div class=\"currencyWrap\">\r\n                                        <p class=\"cwTitle\">{{ t(\"Battle.paymentType\") }}</p>\r\n                                        <div class=\"tapsLine\">\r\n                                                <p class=\"currencyTap\" :class=\"{ active: currencyType === 1 }\"\r\n                                                        @click=\"bindChangeCurrencyType(1, currentChallenge?.enrollmentFee)\">\r\n                                                        {{ t(\"Battle.fiatCurrency\") }}</p>\r\n                                                <p class=\"currencyTap\" :class=\"{ active: currencyType === 0 }\"\r\n                                                        @click=\"bindChangeCurrencyType(0, currentChallenge?.enrollmentFee)\">\r\n                                                        {{ t(\"Battle.cryptoCurrency\") }}</p>\r\n                                        </div>\r\n                                </div>\r\n                                <div class=\"currencyWrap\">\r\n                                        <p class=\"cwTitle\">{{ t(\"Battle.paymentAmount\") }}</p>\r\n                                        <client-only>\r\n                                                <el-select class=\"fbSelect\" popper-class=\"fbPopper\"\r\n                                                        v-model=\"currencyData.current\" placeholder=\"Select\"\r\n                                                        @change=\"fbSelectChange\">\r\n                                                        <template #label>\r\n                                                                <div class=\"fbSelectBox\">\r\n                                                                        <p class=\"currencyNum\">{{ currencyData.converter\r\n                                                                                }}</p>\r\n                                                                        <div class=\"fbLabel\">\r\n                                                                                <img class=\"icon\" alt=\"\"\r\n                                                                                        :src=\"currencyData.currentFlag\" />\r\n                                                                                {{ currencyData.current }}\r\n                                                                        </div>\r\n                                                                </div>\r\n                                                        </template>\r\n                                                        <template #header>\r\n                                                                <div class=\"fbSearch\">\r\n                                                                        <i class=\"iconfont icon-sousuo\"></i>\r\n                                                                        <input class=\"in\" placeholder=\"Search...\"\r\n                                                                                v-model=\"searchCurrency\" />\r\n                                                                        <i class=\"iconfont icon-close\"\r\n                                                                                v-if=\"searchCurrency.length > 0\"\r\n                                                                                @click=\"searchCurrency = ''\"></i>\r\n                                                                </div>\r\n                                                        </template>\r\n                                                        <el-option v-for=\"(item, index) in currencyData.list\"\r\n                                                                :key=\"index\" :label=\"item.currency\"\r\n                                                                :value=\"item.currency\">\r\n                                                                <div class=\"fbOption\">\r\n                                                                        <img class=\"icon\" alt=\"\"\r\n                                                                                :src=\"item.data.flag\" />\r\n                                                                        {{ item.currency }}\r\n                                                                </div>\r\n                                                        </el-option>\r\n                                                </el-select>\r\n                                        </client-only>\r\n                                </div>\r\n                                <div class=\"battle-plat\">\r\n                                        <div class=\"plat\">{{ t(\"Battle.plat\") }}</div>\r\n                                        <div class=\"mc\">\r\n                                                <i class=\"icon\"></i> MC markets(MT5)\r\n                                        </div>\r\n                                </div>\r\n                                <div class=\"battle-tips\">{{ t(\"Battle.tips\") }}</div>\r\n                                <p id=\"desc\" class=\"mob_show\"></p>\r\n                        </div>\r\n                        <div class=\"battle_inner-desc\">\r\n                                <div class=\"desc\">\r\n                                        <h5 class=\"title\">{{ t(\"Battle.orderDesc\") }}</h5>\r\n                                        <div class=\"acount-total\">\r\n                                                <div class=\"acount-btn\">{{ !isEmptyData ? t(currentChallenge?.name) :\r\n                                                        \"--\" }}</div>\r\n                                                <span>{{ currentChallenge?.discountFee ?\r\n                                                        formatNumberWithCurrency(currentChallenge?.discountFee,\r\n                                                        0) : currentChallenge?.payment }}</span>\r\n                                                <span class=\"oldPrice\" v-if=\"currentChallenge?.discountFee\">{{\r\n                                                        currentChallenge?.payment\r\n                                                        }}</span>\r\n                                        </div>\r\n                                        <div class=\"desc-list\">\r\n                                                <div class=\"desc-item\">\r\n                                                        <battleToolTips :contentStr=\"t('User.txt6')\"\r\n                                                                :valueStr=\"t('Battle.size')\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">{{ currentChallenge?.amount }}</span>\r\n                                                </div>\r\n                                                <div class=\"desc-item\">\r\n                                                        <battleToolTips :contentStr=\"t('User.txt7')\"\r\n                                                                :valueStr=\"t('Battle.li.li1')\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">3 {{ t(\"Battle.li.li9\") }}</span>\r\n                                                </div>\r\n                                                <div class=\"desc-item\" v-if=\"!isEmptyData\">\r\n                                                        <battleToolTips :contentStr=\"t(getItemByKey(0, 2)?.desc)\"\r\n                                                                :valueStr=\"t(getItemByKey(0, 2)?.title)\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">{{ getItemByKey(0, 2)?.content }}</span>\r\n                                                </div>\r\n                                                <div class=\"desc-item\" v-if=\"!isEmptyData\">\r\n                                                        <battleToolTips :contentStr=\"t(getItemByKey(0, 3)?.desc)\"\r\n                                                                :valueStr=\"t(getItemByKey(0, 3)?.title)\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">{{ getItemByKey(0, 3)?.content }}</span>\r\n                                                </div>\r\n                                                <div class=\"desc-item\" v-if=\"!isEmptyData\">\r\n                                                        <battleToolTips :contentStr=\"t(getItemByKey(0, 1)?.desc)\"\r\n                                                                :valueStr=\"t(getItemByKey(0, 1)?.title)\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">{{ getItemByKey(0, 1)?.content }}</span>\r\n                                                </div>\r\n                                                <div class=\"desc-item\" v-if=\"!isEmptyData\">\r\n                                                        <battleToolTips :contentStr=\"t(getItemByKey(0, 4)?.desc)\"\r\n                                                                :valueStr=\"t(getItemByKey(0, 4)?.title)\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">{{ getItemByKey(0, 4)?.content }}</span>\r\n                                                </div>\r\n                                                <div class=\"desc-item\" v-if=\"!isEmptyData\">\r\n                                                        <battleToolTips :contentStr=\"t(getItemByKey(0, 5)?.desc)\"\r\n                                                                :valueStr=\"t(getItemByKey(0, 5)?.title)\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">{{ getItemByKey(0, 5)?.content }}</span>\r\n                                                </div>\r\n                                                <div class=\"desc-item\" v-if=\"!isEmptyData\">\r\n                                                        <battleToolTips :contentStr=\"t(getItemByKey(2, 8)?.desc)\"\r\n                                                                :valueStr=\"t(getItemByKey(2, 8)?.title)\">\r\n                                                        </battleToolTips>\r\n                                                        <span class=\"val\">{{ getItemByKey(2, 8)?.content }}</span>\r\n                                                </div>\r\n                                        </div>\r\n                                        <div class=\"post-btn\" @click.stop=\"doChallengeSignUp\">\r\n                                                {{ t(\"Challenges.ScalingPlan.buy\") }}\r\n                                                {{ currentChallenge?.discountFee ?\r\n                                                        formatNumberWithCurrency(currentChallenge?.discountFee, 0) :\r\n                                                currentChallenge?.payment }}\r\n                                        </div>\r\n                                        <div class=\"tips\">{{ t(\"Battle.tips2\") }}</div>\r\n                                </div>\r\n                        </div>\r\n                </div>\r\n                <publicWaitingPayment ref=\"publicWaitingPaymentRef\"></publicWaitingPayment>\r\n                <div class=\"battle_bottom_mob mob_show\">\r\n                        <div class=\"btn\" @click.stop=\"doChallengeSignUp\">\r\n                                {{ t(\"Challenges.ScalingPlan.buy\") }}\r\n                                {{ currentChallenge?.discountFee ?\r\n                                        formatNumberWithCurrency(currentChallenge?.discountFee, 0) :\r\n                                currentChallenge?.payment }}\r\n                        </div>\r\n                        <p class=\"tips\">\r\n                                {{ t(\"Battle.fee\") }}\r\n                                {{ currentChallenge?.discountFee ?\r\n                                        formatNumberWithCurrency(currentChallenge?.discountFee, 0) :\r\n                                currentChallenge?.payment }}\r\n                                ≈\r\n                                {{ currencyData.converter }}\r\n                                {{ currencyData.current }}\r\n                        </p>\r\n                </div>\r\n        </div>\r\n</template>\r\n<script setup>\r\nimport battleBackLine from \"./backLine.vue\";\r\nimport battleActivity from \"./activity.vue\";\r\nimport battleToolTips from \"./toolTips.vue\"\r\nimport { formatNumberWithCurrency } from \"@/utils/tools\";\r\nimport { usePayment } from \"@/hooks/usePayment\"\r\nconst { bindDoChallengeSignUp } = usePayment()\r\nimport { useCurrency } from \"@/hooks/useCurrency\"\r\nconst { searchCurrency, currencyData, currencyType, bindGetCurrency, bindGetConverter, bindChangeCurrencyType, bindChangeCurrency } = useCurrency()\r\nimport { useChallengeInfo } from \"@/hooks/useChallengeInfo\"\r\nconst { challengesData, isEmptyData, getChallengeInfoHooks } = useChallengeInfo()\r\n\r\nconst publicWaitingPaymentRef = ref()\r\nconst currentType = ref(0)\r\nconst currentChallenge = ref({})\r\nconst fbSelectChange = (e) => {\r\n        bindChangeCurrency(e, currentChallenge.value.enrollmentFee)\r\n}\r\nconst bindGetUsedActivityCode = (e) => {\r\n        currentType.value = e.type\r\n        currentChallenge.value = challengesData.value.list[e.type]\r\n        currentChallenge.value.discountFee = e.price\r\n        bindGetConverter(e.price)\r\n}\r\n\r\nconst { t } = useI18n();\r\nonMounted(() => {\r\n        getChallengeInfoHooks(() => {\r\n                if (challengesData.value.list) {\r\n                        challengesData.value.list.forEach(challenge => {\r\n                                challenge.discountFee = 0\r\n                                challenge.levelList.forEach(level => {\r\n                                        level.children.forEach(child => {\r\n                                                if (child.key === 2) child.title = \"Challenges.ScalingPlan.tableHeader.th17\";\r\n                                                if (child.key === 3) child.title = \"Challenges.ScalingPlan.tableHeader.th18\";\r\n                                        });\r\n                                });\r\n                        })\r\n                        currentChallenge.value = challengesData.value.list[currentType.value]\r\n                        bindGetCurrency(currentChallenge.value.enrollmentFee)\r\n                }\r\n        })\r\n})\r\nconst changeChallengeType = (index) => {\r\n        currentType.value = index\r\n        currentChallenge.value = challengesData.value.list[index]\r\n        bindGetConverter(currentChallenge.value.discountFee || currentChallenge.value.enrollmentFee)\r\n}\r\nconst getItemByKey = (i, key) => {\r\n        return currentChallenge.value.levelList[i].children.find(item => item.key === key)\r\n}\r\nconst doChallengeSignUp = () => {\r\n        const data = currentChallenge.value\r\n        //发起订单参数\r\n        const param = {\r\n                \"accountUid\": data.uid,\r\n                \"platform\": data.platformName,\r\n                \"localAmount\": data.enrollmentFee,\r\n                \"localCurrency\": data.settlementCurrency,\r\n                \"assetType\": currencyType.value\r\n        }\r\n        //发起支付参数\r\n        const payParams = {\r\n                \"amount\": data.enrollmentFee,\r\n                \"baseCurrency\": currencyType.value === 1 ? \"USD\" : \"USDT\",\r\n                \"targetCurrency\": currencyData.value?.current ? currencyData.value.current : \"USD\",\r\n                \"assetType\": currencyType.value\r\n        }\r\n        bindDoChallengeSignUp(param, payParams, () => {\r\n                publicWaitingPaymentRef.value.shower()\r\n        })\r\n};\r\nconst route = useRouter()\r\nwatch(\r\n        () => route,\r\n        (newValue) => {\r\n                let idx = +newValue.currentRoute.value.query.idx\r\n                currentType.value = idx ? idx - 1 : 0\r\n        },\r\n        { immediate: true }\r\n);\r\n</script>\r\n<style scoped lang='scss' src=\"./index.scss\"></style>","<template>\r\n\t<div id=\"battle\">\r\n\t\t<userBattle></userBattle>\r\n\t</div>\r\n</template>\r\n<script setup>\r\nimport { ga4 } from \"@/utils/ga4\";\r\nconst router = useRouter()\r\nconst { locale } = useI18n()\r\n\r\n\r\ndefinePageMeta({\r\n\tlayout: 'ucenter',\r\n\tindex: 1,\r\n\t// redirect: `/${lang}/user`\r\n})\r\n// 重定向到用戶中心首頁\r\n// const redirectLogic = () => {\r\n// \tif (locale.value === 'en-us') {\r\n// \t\trouter.replace(`/user`)\r\n// \t} else {\r\n// \t\trouter.replace(`/${locale.value}/user`)\r\n// \t}\r\n// }\r\n// redirectLogic()\r\nonMounted(() => {\r\n\tga4({\r\n\t\ttypes: \"first_visit\",\r\n\t\tparams: {\r\n\t\t\t\"page_name\": \"UCenter Battle\",\r\n\t\t},\r\n\t\tisDailyVisit: true\r\n\t})\r\n})\r\n</script>\r\n<style scoped lang='scss'>\r\n#battle {\r\n\theight: 100%;\r\n}\r\n</style>"],"version":3}